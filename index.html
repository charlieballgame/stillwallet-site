<!doctype html><html><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>StillWallet — Mindful Spending</title>
<link rel="icon" href="favicon.ico"/>
<link rel="stylesheet" href="site.css"/>
</head><body>
<header class="top"><div class="wrap">
  <div class="logo"><span>||</span>StillWallet</div>
  <nav><a href="#features">Features</a><a href="#pricing">Pricing</a><a href="#app" class="btn">Open App</a></nav>
</div></header>
<main class="wrap">
  <section class="hero card">
    <div>
      <h1>Your money, without the rush.</h1>
      <p>Add a gentle pause before checkout, see how much you saved, and build better habits.</p>
      <a class="btn" href="#app">Get Started</a>
    </div>
    <img src="hero.png" alt="UI" />
  </section>

  <section id="app" class="card">
    <div class="row"><h2>Sign up</h2><h2>Log in</h2></div>
    <div class="grid2">
      <div>
        <input id="suName" placeholder="Name">
        <input id="suEmail" placeholder="you@example.com">
        <input id="suPass" type="password" placeholder="••••••••">
        <button class="btn" id="btnSignup">Create account</button>
        <div class="muted" id="suMsg"></div>
      </div>
      <div>
        <input id="liEmail" placeholder="you@example.com">
        <input id="liPass" type="password" placeholder="••••••••">
        <button class="btn" id="btnLogin">Log in</button>
        <div class="muted" id="liMsg"></div>
      </div>
    </div>
    <div id="appDash" style="display:none;margin-top:12px">
      <div class="row"><h2>Dashboard</h2><div class="pill" id="hdrInfo"></div></div>
      <div class="grid2">
        <div class="card sub"><h3>Summary</h3><div class="pill">Lifetime <span id="life">$0.00</span></div></div>
        <div class="card sub"><h3>AI Insights</h3><p id="ai" class="blur">“Evenings are your impulse window… shorten pauses on weekdays.”</p></div>
      </div>
    </div>
  </section>

  <section id="pricing" class="card">
    <h2>Pricing</h2>
    <div class="grid2">
      <div class="price"><h3>Free</h3><ul><li>Pause overlay</li><li>Dashboard</li><li>Saving history (local)</li></ul></div>
      <div class="price"><h3>Pro</h3><ul><li>AI Insights</li><li>Weekly reports</li><li>Priority features</li></ul></div>
    </div>
  </section>
</main>

<script>
const API=(p,m='GET',b=null,t=null)=>fetch('/api'+p,{method:m,headers:{'Content-Type':'application/json',...(t?{Authorization:'Bearer '+t}:{})},body:b?JSON.stringify(b):null}).then(r=>r.json());
function $(s){return document.querySelector(s)}
async function refresh(){
  const token=localStorage.getItem('sw_token'); if(!token) return;
  const me=await API('/me','GET',null,token).catch(()=>null); if(!me||!me.user) return;
  $('#suMsg').textContent=''; $('#liMsg').textContent='';
  document.getElementById('appDash').style.display='block';
  document.getElementById('hdrInfo').textContent=(me.user.name||me.user.email)+' · '+(me.user.tier||'basic').toUpperCase();
  document.getElementById('ai').classList.toggle('blur',(me.user.tier||'basic')!=='pro');
}
document.getElementById('btnSignup').onclick=async()=>{
  const r=await API('/auth/register','POST',{name:$('#suName').value,email:$('#suEmail').value,password:$('#suPass').value});
  if(r.error){$('#suMsg').textContent=r.error;return;} localStorage.setItem('sw_token',r.token); refresh();
}
document.getElementById('btnLogin').onclick=async()=>{
  const r=await API('/auth/login','POST',{email:$('#liEmail').value,password:$('#liPass').value});
  if(r.error){$('#liMsg').textContent=r.error;return;} localStorage.setItem('sw_token',r.token); refresh();
}
refresh();
</script>
</body></html>
